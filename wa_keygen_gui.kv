
<ListItemWithCheckbox@ThreeLineIconListItem>:


<LocalKeyStoreListItem@ThreeLineAvatarListItem>:
    text: app.tr._("Three-line item with avatar")
    secondary_text: app.tr._("Secondary text here")
    tertiary_text: app.tr._("fit more text than usual")

    ImageLeftWidget:
        icon: "account-check"


<KeygenPanel@BoxLayout>

    name: "keygen_panel"
    orientation: "vertical"

    canvas.before:
        Color:
            rgba: app.COLORS.DARKEST_BLUE
        Rectangle:
            pos: self.pos
            size: self.size

    AnchorLayout:
        padding: [0,10]
        anchor_x: 'center'
        anchor_y: 'top'
        size_hint: 1, 0.3
        MDToolbar:
            title:"Select USB device to be initialized with crypto keys"
            size_hint: 1, 1
            md_bg_color: app.COLORS.DARKEST_BLUE
            elevation: 2

    GridLayout:
        cols:2
        rows: 3
        GridLayout:
            size_hint: 1, 1
            rows:5
            id: grid

            ScrollView:
                id: table
                size_hint: 1, 1

                #MDList:
                #    padding:[20,0,0,0]
                #    id: scroll
                #    #bg_color: [1, 0, 0, 1]
                MDSelectionList:
                    id: scroll
                    selected_mode: True
                    #spacing: "12dp"
                    #overlay_color: app.overlay_color[:-1] + [.2]
                    #icon_bg_color: app.overlay_color
                    #on_selected: app.on_selected(*args)
                    #on_unselected: app.on_unselected(*args)
                    #on_selected_mode: app.set_selection_mode(*args)

            FloatLayout:  # what is this?
                pos:(20, 20)
                id: barProgressWIP
                size_hint: 1, 0.1

        AnchorLayout:
            padding: [0, 20, 20, 0]
            size_hint: 0.5, 1

            Button:
                id: btn_refresh
                background_color: app.COLORS.BUTTON_BACKGROUND
                color: app.COLORS.DARKEST_BLUE
                text: "Refresh"
                size: 150, 50
                size_hint: None, None
                on_release:
                    app.list_detected_devices()
        GridLayout:
            rows:3
            size_hint: 0.4, 0.3
            AnchorLayout:
                padding: [20,20]
                size_hint: 0.4, 0.3
                id: status_title_layout
            AnchorLayout:
                padding: [20,20]
                size_hint: 0.4, 0.3
                id: status_message_layout

    GridLayout:
        rows: 2
        spacing: [20,250]

        GridLayout:
            cols:2
            spacing: [10,10]
            padding: [10,10]

            GridLayout:
                padding: [10, 10, 0, 0]
                spacing: [20,20]
                rows: 4

                MDTextField:
                    id: userfield
                    size_hint_x: -0.5
                    hint_text: 'Owner name'
                    #helper_text: 'Your own name'
                    #helper_text_mode: 'on_focus'
                    width: 50
                    height: 20
                    color_mode: 'custom'
                    line_color_focus: app.COLORS.WHITE
                    mode: "fill"
                    disabled: True
                    fill_color: app.COLORS.DARK_GREY
                    current_hint_text_color: app.COLORS.WHITE

                MDTextField:
                    id: passphrasefield
                    size_hint_x: -0.5
                    hint_text: 'Passphrase'
                    #helper_text: 'Type a long sentence'
                    #helper_text_mode: 'on_focus'
                    width: 50
                    color_mode: 'custom'
                    line_color_focus: app.COLORS.WHITE
                    mode: "fill"
                    disabled: True
                    fill_color: app.COLORS.DARK_GREY
                    current_hint_text_color: app.COLORS.WHITE

                MDTextField:
                    id: passphrasehintfield
                    size_hint_x: -0.5
                    hint_text: 'Passphrase hint'
                    #helper_text: 'Type a short hint'
                    #helper_text_mode: 'on_focus'
                    width: 50
                    color_mode: 'custom'
                    line_color_focus: app.COLORS.WHITE
                    mode: "fill"
                    disabled: True
                    fill_color: app.COLORS.DARK_GREY
                    current_hint_text_color: app.COLORS.WHITE

                AnchorLayout:
                    size_hint: 1, 1

                    pos: 300,300

                    id: errors

            AnchorLayout:
                padding: [20,20]

                size_hint: 0.5, 0.9

                Button:
                    id: button_initialize
                    background_color: app.COLORS.BUTTON_BACKGROUND
                    color: app.COLORS.DARKEST_BLUE
                    text: "Initialize"
                    size: 150, 50
                    size_hint: None, None
                    disabled: True
                    on_release:
                        app.show_validate()

        MDProgressBar:
            padding: [20,200]
            id: barProgress
            value: 0

