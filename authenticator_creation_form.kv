

<AuthenticatorCreationScreen>:

    on_pre_enter: root.reset_initialization_form()

    ##_selected_authenticator_path: None  # root.manager.get_screen("keyring_selector_screen")._selected_authenticator_path

    GridLayout:
        padding: [10, 10, 10, 10]
        spacing: [20, 20]
        cols: 1

        MDToolbar:
            title: app.tr._("Create authenticator")
            id: initialization_form_toolbar
            left_action_items: [["arrow-left", lambda x: root.go_to_home_screen()]]
            right_action_items: [["help-circle-outline", lambda x: root.display_help_popup()]]

        MDLabel:
            text: app.tr._("Target:") + " "+ str(root._selected_authenticator_path)
            halign: "center"

        MDTextField:
            id: formfield_username
            #size_hint_x: -0.5
            hint_text: 'Owner name'
            #helper_text: 'Your own name'
            #helper_text_mode: 'on_focus'
            #width: 50
            #height: 20
            #color_mode: 'custom'
            #line_color_focus: app.COLORS.WHITE
            mode: "fill"
            #disabled: False
            #fill_color: app.COLORS.DARK_GREY
            #current_hint_text_color: app.COLORS.WHITE

        MDTextField:
            id: formfield_passphrase
            #size_hint_x: -0.5
            hint_text: 'Passphrase'
            #helper_text: 'Type a long sentence'
            #helper_text_mode: 'on_focus'
            #width: 50
            #color_mode: 'custom'
            #line_color_focus: app.COLORS.WHITE
            mode: "fill"
            #disabled: False
            #fill_color: app.COLORS.DARK_GREY
            #current_hint_text_color: app.COLORS.WHITE

        MDTextField:
            id: formfield_passphrasehint
            #size_hint_x: -0.5
            hint_text: 'Passphrase hint'
            #helper_text: 'Type a short hint'
            #helper_text_mode: 'on_focus'
            #width: 50
            #color_mode: 'custom'
            #line_color_focus: app.COLORS.WHITE
            mode: "fill"
            #disabled: False
            #fill_color: app.COLORS.DARK_GREY
            #current_hint_text_color: app.COLORS.WHITE

    #AnchorLayout:
        #padding: [20,20]

       # size_hint: 0.5, 0.9

        RelativeLayout :
            height: dp(40)

            Button:
                id: button_initialize
                #background_color: app.COLORS.BUTTON_BACKGROUND
                #color: app.COLORS.DARKEST_BLUE
                text: "Initialize"
                #size: 150, 50
                size_hint: .4, 1
                pos_hint: {'x': .3}

                disabled: False
                on_release:
                    root.request_authenticator_initialization()

        AnchorLayout:
            size_hint: 1, 1

            pos: 300,300

            MDLabel:
                id: operation_status_label
                text: root.operation_status

        MDProgressBar:
            size_hint_y: None
            height: dp(10)
            padding: [20,200]
            id: progress_bar
            value: 0
